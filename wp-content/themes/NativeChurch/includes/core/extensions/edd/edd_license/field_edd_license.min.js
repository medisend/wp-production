/*global jQuery, document, imic_opts, ajaxurl */(function(e){"use strict";e.imic=e.imic||{};e(document).ready(function(){e.imic.edd()});e.imic.edd=function(){jQuery(".imic-edd-input").change(function(){jQuery(this).parent().find(".imic-edd-status").val("")});jQuery(document).on("click",".imic-EDDAction",function(e){e.preventDefault();var t=jQuery(this).parents(".imic-container-edd_license:first"),n=jQuery(this).attr("data-id"),r={};t.find(".imic-edd").each(function(){r[jQuery(this).attr("id").replace(n+"-","")]=jQuery(this).val()});r.edd_action=jQuery(this).attr("data-edd_action");r.opt_name=imic_opts.opt_name;jQuery.post(ajaxurl,{action:"imic_edd_"+imic_opts.opt_name+"_license",data:r},function(e){e=jQuery.parseJSON(e);jQuery("#"+n+"-status").val(e.status);jQuery("#"+n+"-status_notice").html(e.status);if(e.response==="valid"){jQuery("#"+n+"-notice").attr("class","imic-info-field imic-success");jQuery("#"+n+"-activate").fadeOut("medium",function(){jQuery("#"+n+"-deactivate").fadeIn().css("display","inline-block")})}else if(e.response==="deactivated"){jQuery("#"+n+"-notice").attr("class","imic-info-field imic-warning");jQuery("#"+n+"-deactivate").fadeOut("medium",function(){jQuery("#"+n+"-activate").fadeIn().css("display","inline-block")})}else jQuery("#"+n+"-deactivate").fadeOut("medium",function(){jQuery("#"+n+"-notice").attr("class","imic-info-field imic-critical");jQuery("#"+n+"-activate").fadeIn().css("display","inline-block")})})})}})(jQuery);